<html>
   <head>
      <title>React Sample App</title>
      <style>
         /* http://meyerweb.com/eric/tools/css/reset/ 
         v2.0 | 20110126
         License: none (public domain)
         */
         html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video {
         padding: 0;
         border: 0;
         font-size: 100%;
         font: inherit;
         vertical-align: baseline;
         }
         article, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section { display: block }
         body { line-height: 1 }
         ol, ul { list-style: none }
         blockquote, q { quotes: none }
         blockquote:before, blockquote:after, q:before, q:after {
         content: '';
         content: none;
         }
         table {
         border-collapse: collapse;
         border-spacing: 0;
         }
         /* * Copyright (c) 2012 Thibaut Courouble
         * http://www.webinterfacelab.com
         *
         * Licensed under the MIT License:
         * http://www.opensource.org/licenses/mit-license.php
         ================================================== */
         /* ========================================================
         Page
         =====================================================
         ================================================== */
         body {
         background: #f8f6f6;
         color: #404040;
         font-size: 12px;
         font-weight: normal;
         line-height: 20px;
         background: linear-gradient(90deg, #2BC0E4 10%, #EAECC6 90%);
         font-family: cursive;
         }
         a {
         color: #1e7ad3;
         text-decoration: none;
         }
         a:hover { text-decoration: underline }
         /* ========================================================
         Icons
         =====================================================
         ================================================== */
         [class^="icon-"], [class*=" icon-"] {
         display: inline-block;
         width: 12px;
         height: 12px;
         vertical-align: -2px;
         margin-right: 2px;
         background-image: url("http://demo.webinterfacelab.com/14-to-do-list/img/sprite.png");
         background-repeat: no-repeat;
         text-indent: 100%;
         white-space: nowrap;
         overflow: hidden;
         }
         /* ========================================================
         Todo List
         =====================================================
         ================================================== */
         .todo {
         position: relative;
         width: 260px;
         padding: 12px 0;
         background: #fff;
         border: 1px solid;
         border-color: #dfdcdc #d9d6d6 #ccc;
         border-radius: 2px;
         -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
         -moz-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
         box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
         }
         .todo:before, .todo:after {
         content: '';
         position: absolute;
         z-index: -1;
         height: 4px;
         background: #fff;
         border: 1px solid #ccc;
         border-radius: 2px;
         }
         .todo:after {
         left: 0;
         right: 0;
         bottom: -3px;
         -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
         -moz-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
         box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
         }
         .todo:before {
         left: 2px;
         right: 2px;
         bottom: -5px;
         border-color: #c4c4c4;
         -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
         -moz-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
         box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
         }
         .lt-ie9 .todo:before, .lt-ie9 .todo:after {
         height: 1px;
         border-top: 0;
         }
         .todo-list { border-top: 1px solid #e6ebed }
         .todo-list:before {
         content: '';
         width: 3px;
         z-index: 2;
         border: 1px solid #f2e3df;
         border-width: 0 1px;
         position: absolute;
         top: 0px;
         bottom: 0px;
         left: 35px;
         }
         .todo-list li {
         position: relative;
         padding: 7px 15px 7px 50px;
         line-height: 21px;
         font-size: 12px;
         color: #8b8f97;
         border-bottom: 1px solid #e6ebed;
         }
         input[type=checkbox] {
         display: none;
         }
         input[type=checkbox]:checked + .toggle:after{
         opacity: 1;
         }
         .todo-list .toggle {
         display: block;
         height: 35px;
         width: 35px;
         position: absolute;
         top: 0px;
         bottom: 0px;
         left: 0px;
         text-indent: 100%;
         overflow: hidden;
         cursor: pointer;
         }
         .toggle:after {
         content: '';
         position: absolute;
         position: absolute;
         width: 7px;
         height: 3px;
         background: transparent;
         top: 14px;
         left: 13px;
         border: 2px solid #aaa;
         border-top: none;
         border-right: none;
         -webkit-transform: rotate(-45deg);
         -moz-transform: rotate(-45deg);
         -o-transform: rotate(-45deg);
         -ms-transform: rotate(-45deg);
         transform: rotate(-45deg);
         opacity: 0;
         }
         .todo-list .toggle:before {
         content: '';
         width: 15px;
         height: 15px;
         background: #faf9f9;
         border: 1px solid #6bb3ca;
         border-radius: 2px;
         position: absolute;
         top: 9px;
         left: 9px;
         -webkit-box-shadow: 0 1px 1px #dfecf4;
         -moz-box-shadow: 0 1px 1px #dfecf4;
         box-shadow: 0 1px 1px #dfecf4;
         }
         .todo-list .toggle:hover:before {
         -webkit-box-shadow: 0 0 3px #6bb3ca;
         -moz-box-shadow: 0 0 3px #6bb3ca;
         box-shadow: 0 0 3px #6bb3ca;
         }
         .todo-list .done .toggle:before, .todo-list .toggle:active:before {
         border-color: #c0c0c0 #ccc #d8d8d8;
         -webkit-box-shadow: inset 0 1px rgba(0, 0, 0, 0.05), inset 0 5px 5px rgba(0, 0, 0, 0.05);
         -moz-box-shadow: inset 0 1px rgba(0, 0, 0, 0.05), inset 0 5px 5px rgba(0, 0, 0, 0.05);
         box-shadow: inset 0 1px rgba(0, 0, 0, 0.05), inset 0 5px 5px rgba(0, 0, 0, 0.05);
         }
         .todo-controls {
         margin: 0 15px 12px 50px;
         height: 12px;
         }
         .todo-controls li { float: left }
         .todo-controls li + li { margin-left: 10px }
         .todo-controls .right { float: right }
         .todo-controls a {
         display: block;
         margin: 0;
         opacity: .6;
         }
         .todo-controls a:hover { opacity: 1 }
         .todo-pagination {
         margin: 12px 12px 0 50px;
         height: 22px;
         }
         .todo-pagination li { float: left }
         .todo-pagination .next { float: right }
         .todo-pagination .next i { margin: 0 0 0 2px }
         .todo-pagination a, .todo-pagination span {
         display: block;
         line-height: 22px;
         font-size: 11px;
         color: #676f7f;
         }
         .todo-pagination a {
         padding: 0 8px;
         text-shadow: 0 1px #fff;
         background: #f1f0f0;
         border-radius: 3px;
         }
         .todo-pagination a:hover {
         background: #e9e9e9;
         text-decoration: none;
         }
         .todo-pagination span {
         padding: 0 4px;
         opacity: .3;
         }
         /* ========================================================
         About
         =====================================================
         ================================================== */
         .about {
         margin: 80px auto 50px;
         padding: 15px 20px;
         width: 300px;
         text-align: center;
         color: #777;
         text-shadow: 0 1px rgba(255, 255, 255, 0.7);
         background: rgba(0, 0, 0, 0.05);
         border-radius: 3px;
         }
         .about a {
         padding: 1px 3px;
         margin: 0 -1px;
         color: #1c74c8;
         text-decoration: none;
         border-radius: 2px;
         }
         .about a:hover {
         color: #fff;
         text-shadow: 0 1px #0063A6;
         background: #0090D2;
         }
         .glyphicon-remove-circle{
         color:red;
         }
         .glyphicon-remove-circle:hover{
         color:red;
         font-size: 2em;
         }
         .glyphicon-ok-circle{
         color:green;
         }
         .glyphicon-ok-circle:hover{
         color:green;
         font-size: 2em;
         }
		  .glyphicon-remove{
			  color:red;
		  }
		  .glyphicon-remove:hover{
			  color:red;
		  }
         .links { zoom: 1 }
         .links:before, .links:after {
         content: "";
         display: table;
         }
         .links:after { clear: both }
         .links a {
         padding: 6px 0;
         float: left;
         width: 50%;
         font-size: 14px;
         }
      </style>
      <script src="https://unpkg.com/react@15.3.2/dist/react.js"></script>
      <script src="https://unpkg.com/react-dom@15.3.2/dist/react-dom.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	   <link rel="icon" href="https://upload.wikimedia.org/wikipedia/en/thumb/a/a7/React-icon.svg/1280px-React-icon.svg.png">
      <!--  <script type="text/babel" src="App.jsx"></script>-->
   </head>
   <body>
      
      <div class="container">
		  
		 <div class="row">
		  
		  <div class="col-md-12">
			 
		 <nav class="navbar navbar-default">
         <ul class="nav navbar-nav">
            <li><a ui-sref="form"> <span
               class="glyphicon glyphicon-home"></span> Home
               </a>
            </li>
            <li><a ui-sref="about">About Us</a></li>
         </ul>
         <ul class="nav navbar-nav navbar-right">
            <li><a href="https://www.facebook.com/sdas.rng"> <span
               class="fa fa-facebook"></span>
               </a>
            </li>
            <li><a href="https://www.twitter.com/Souvik_Mcet"> <span
               class="fa fa-twitter-square"></span>
               </a>
            </li>
            <li><a href="https://www.github.com/Souvik93"> <span
               class="fa fa-github-square"></span>
               </a>
            </li>
            <li><a href="https://www.linkedin.com/in/souvik-das-aaa34999/"> <span
               class="fa fa-linkedin-square "></span>
               </a>
            </li>
            <li><a href="mailto:souvik.das@live.in"> <span
               class="fa fa-envelope-square"></span>
               </a>
            </li>
         </ul>
         <!--<ul class="nav navbar-nav navbar-right">
            <li><a ui-sref="form" ng-show="lin"><span
            		class="glyphicon glyphicon-log-in"></span> Login</a></li>
            <li><a ui-sref="out" ng-show="lon"><span
            		class="glyphicon glyphicon-log-out"></span> LogOut</a></li>
            </ul>-->
      </nav>
         
 	 
			 </div>
		  </div>
		 
            <div class="row center">
               <div class="col-md-12">
                  <div ui-view></div>
               </div>
            </div>
        
         <div class="row">
            <div class="col-md-12 col-xs-12">
               <marquee behavior="alternate">
                  <h4>To-Do App By Souvik, Database-Moongo Db , Server- Express , UI- React.JS , Backend- JavaScript</h4>
               </marquee>
             
            </div>
			
			 
			   <div id="reactContainer"></div>
			 
         </div>
      </div>
   </body>
   <script type="text/babel">
      var ToDoForm = React.createClass({  
      
      getInitialState:function() {
         return {
           task: [],
        result:"Hi",
        taskDetails:[],
		CtaskDetails:[]
         };
       },
      
      addTasks: function(e){
      	var smpl=this.state.task;
      	smpl.push({text: this._inputElement.value,
           key: Date.now()});
        fetch('tasks', {
         method: 'post',
         headers: {'Content-Type': 'application/json'},
         body: JSON.stringify({
           'text': this._inputElement.value,
           'key': Date.now()
         })
       })
       .then(response => {
         if (response.ok) return response.json()
       })
       .then(data => {
	   
	    var element = document.getElementById('id');
  element.style.display = "block";
	   
       this.setState({
      result: "Data Inserted Succesfully"
       });
	   setTimeout(function() {
    element.style.display = "none";
  }, 5000); 
       })
      	
       this.setState({
         task: smpl
       });
      	this._inputElement.value = "";		
      },
      
      getTasks: function(e){
      
      fetch('getTasks', {
         method: 'get',
         headers: {'Content-Type': 'application/json'},
       })
       .then(response => {
         if (response.ok) return response.json()
       })
       .then(data => {
	   //console.log(data.length);
	   var element = document.getElementById('sec');
	   var Belement = document.getElementById('asec');
	   if(data.length==0){
	   element.style.display="none";
	   Belement.style.display="block"
	   }
	   else{
	   element.style.display="block";
	   Belement.style.display="none"
	   this.setState({
      taskDetails: data
       });
	   }
       
       //console.log(this.state.taskDetails)
       })
      
      },
	  
	   CgetTasks: function(e){
      
      fetch('getCompletedTasks', {
         method: 'get',
         headers: {'Content-Type': 'application/json'},
       })
       .then(response => {
         if (response.ok) return response.json()
       })
       .then(data => {
	   console.log('From get complete tasks method');
	   var element = document.getElementById('csec');
	   var Belement = document.getElementById('acsec');
	   if(data.length==0) {
	   element.style.display="none";
	   Belement.style.display="block"
	   }
	   else{
	   element.style.display="block";
	   Belement.style.display="none";
	   this.setState({
      CtaskDetails: data
       });
	   }
       
       //console.log("Hello"+this.state.CtaskDetails)
       })
      
      },
      render: function() {
	  //console.log("Hello"+this.state.CtaskDetails);
      this.getTasks();
      this.CgetTasks();
      return (
      	<div>
      	<div className="col-md-12 col-xs-6">
      	<form>
      	<div className="form-group">
      	<h4>What do you want to do today?</h4>
             <input type="text" ref={(a) => this._inputElement = a} className="form-control" placeholder="ex- buy new smartphone for friend">
                   </input>
      		  </div>
      		  
      		  <button type="button" className= "btn btn-success" onClick={this.addTasks}>Add Now</button>
      	<div style={{display: 'none'}} id='id' className="alert alert-success"> <h6>{this.state.result}</h6></div>
      	
      	</form>
      	</div>
      		<div className="col-md-6 col-xs-6">
      	   <ToDoList tasks={this.state.taskDetails}> </ToDoList>
      	   </div>
		   
		   <div className="col-md-6 col-xs-6">
      	   <ToDoCList Ctasks={this.state.CtaskDetails}> </ToDoCList>
      	   </div>
		  
      	
      	</div>
         );
       }
      });
      
      var ToDoList=React.createClass({       
       
	   deleteTasks: function(e){
       //console.log(e);
      fetch('tasks', {
         method: 'delete',
         headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({
           'key': e
         })
       })
       .then(response => {
         if (response.ok) return response.json()
       })
       .then(data => {
       //alert("task deleted");
       //console.log(this.state.taskDetails)
       })
      
      },
	  
	  completeTasks: function(okey,text,sdate){
	  
	  fetch('completedTasks', {
         method: 'post',
         headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({
	  		'key':Date.now(),
           'oldKey': okey,
		   'text':text,
		   'sdate': sdate
         })
       })
       .then(response => {
         if (response.ok) return response.json()
       })
       .then(data => {
       //alert("task deleted");
       //console.log(this.state.taskDetails)
       })
	  
	  },
      render: function(){
      			//console.log(this.props.tasks);
      		  var todoEntries = this.props.tasks;
      		function createTasks(item) {
           return <li key={item.key}>{item.text}</li>
         }
      	var listItems = todoEntries.map(createTasks);
      	return(
      		<div>
      	<h4>Check Your To-Do List</h4>
      		<section className="todo" id='sec'>	
      		<ul className="todo-list">
      		{this.props.tasks.map((key) =>
      		<li className="done" key={key.key} >
      		<h6><strong>{key.text} </strong> (<small>{key.sdate} {key.key}</small>)</h6>
      		<a className="glyphicon glyphicon-ok-circle" title="Done" onClick={this.completeTasks.bind(this,key.key,key.text,key.sdate)}></a>
      		<a className="glyphicon glyphicon-remove-circle" onClick={this.deleteTasks.bind(this,key.key)} title="Delete it"></a>
        </li> )}
        </ul>
      		</section>
			<div className="alert alert-warning alert-dismissable" id="asec" style={{display:'none'}}>
    <a href="#" className="close" data-dismiss="alert" aria-label="close">×</a>
    <strong>Warning!</strong> You have not added anything..
  </div>
      		</div>
      );
      }
      });
	  
	   var ToDoCList=React.createClass({
	   
	   
       deleteCompletedTasks: function(e){
       //console.log(e);
      fetch('completedTasks', {
         method: 'delete',
         headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({
           'key': e
         })
       })
       .then(response => {
         if (response.ok) return response.json()
       })
       .then(data => {
       //alert("task deleted");
       //console.log(this.state.taskDetails)
       })
      
      },
      render: function(){
      			//console.log(this.props.Ctasks);
      		  var todoEntries = this.props.Ctasks;
			  //console.log(todoEntries);
      		function createTasks(item) {
           return <li key={item.key}>{item.text}</li>
         }
      	var listItems = todoEntries.map(createTasks);
      	return(
      		<div>
      	<h4><span className="glyphicon glyphicon-ok"></span> Check Your Completed Tasks</h4>
		<section className="todo" id="csec">	
      		<ul className="todo-list">
      		{this.props.Ctasks.map((key) =>
      		<li className="done" key={key.key} >
      		<h5><strong><del>{key.text}</del></strong>{key.key} {key.oldKey}</h5>
			<h6><small>Completed Date:{key.completedDate}</small> <a className="glyphicon glyphicon-remove" onClick={this.deleteCompletedTasks.bind(this,key.key)} title="Delete it"></a></h6>
        </li> )}
        </ul>
      		</section>
			<div className="alert alert-info alert-dismissable" id="acsec" style={{display:'none'}}>
    <a href="#" className="close" data-dismiss="alert" aria-label="close">×</a>
    <strong>Warning!</strong> Nothing to show here..
  </div>	
      		</div>
      );
      }
      });
      ReactDOM.render(<ToDoForm />, document.getElementById('reactContainer'));  
      
   </script>
</html>